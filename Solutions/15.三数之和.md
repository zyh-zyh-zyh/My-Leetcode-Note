# 15. 三数之和

```java
class Solution {
    public List<List<Integer>> threeSum(int[] nums) {
        HashMap<Integer, Integer> table = new HashMap();
        HashSet<List<Integer>> resSet = new HashSet();
        List<List<Integer>> res = new ArrayList();
        
        
        for (int k : nums) {
            table.put(k, table.getOrDefault(k, 0) + 1);
        }
        
        for (int k1 : table.keySet()) {
            boolean isFound = false;
            //取一个数出来（table 中少一个 k1）
            int value1 = k1;
            table.put(k1, table.get(k1) - 1);

            for (int k2 : table.keySet()) {
                //第二次取数出来（table 中少一个 k2）
                int count2 = table.get(k2);
                if (count2 != 0) {
                    int value2 = k2;
                    table.put(k2, count2 - 1);

                    if (table.get(- k1 - k2) != null) {
                        if (table.get(-k1 - k2) != 0) {
                            isFound = true;
                            int value3 = - k1 - k2;
                            List<Integer> tmp = new ArrayList();
                            tmp.add(value1);
                            tmp.add(value2);
                            tmp.add(value3);
                            Collections.sort(tmp);
                            //add to result list
                            //list 若为空，则不含重复，直接添加
                            if (res.isEmpty()) {
                                res.add(tmp);
                            }
                            //list 不为空，则判断结果是否已存在
                            else {
                                boolean isExisted = false;
                                for (List<Integer> ls : res) {
                                    if (ls.equals(tmp)) {
                                        isExisted = true;
                                        break;
                                    }
                                }
                                if (!isExisted) {
                                    res.add(tmp);
                                }
                            }
                        } 
                    }
                    //放回 k2
                    table.put(k2, table.get(k2) + 1);
                }
            }
            //放回 k1
            table.put(k1, table.get(k1) + 1);
        }
        return res;
    }
}
```

* 优化存储结果的List 改为HashSet

```java
class Solution {
    public List<List<Integer>> threeSum(int[] nums) {
        HashMap<Integer, Integer> table = new HashMap();
        HashSet<List<Integer>> resSet = new HashSet();
        List<List<Integer>> res = new ArrayList();
        
        
        for (int k : nums) {
            table.put(k, table.getOrDefault(k, 0) + 1);
        }
        
        for (int k1 : table.keySet()) {
            boolean isFound = false;
            //取一个数出来（table 中少一个 k1）
            int value1 = k1;
            table.put(k1, table.get(k1) - 1);

            for (int k2 : table.keySet()) {
                //第二次取数出来（table 中少一个 k2）
                int count2 = table.get(k2);
                if (count2 != 0) {
                    int value2 = k2;
                    table.put(k2, count2 - 1);

                    if (table.get(- k1 - k2) != null) {
                        if (table.get(-k1 - k2) != 0) {
                            isFound = true;
                            int value3 = - k1 - k2;
                            List<Integer> tmp = new ArrayList();
                            tmp.add(value1);
                            tmp.add(value2);
                            tmp.add(value3);
                            Collections.sort(tmp);
                            //add to result hashset
                            resSet.add(tmp);

                            // //list 若为空，则不含重复，直接添加
                            // if (res.isEmpty()) {
                            //     res.add(tmp);
                            // }
                            // //list 不为空，则判断结果是否已存在
                            // else {
                            //     boolean isExisted = false;
                            //     for (List<Integer> ls : res) {
                            //         if (ls.equals(tmp)) {
                            //             isExisted = true;
                            //             break;
                            //         }
                            //     }
                            //     if (!isExisted) {
                            //         res.add(tmp);
                            //     }
                            // }
                        } 
                    }
                    //放回 k2
                    table.put(k2, table.get(k2) + 1);
                }
            }
            //放回 k1
            table.put(k1, table.get(k1) + 1);
        }
        for (List<Integer> ls : resSet) {
            res.add(ls);
        }
        return res;
    }
}
```
